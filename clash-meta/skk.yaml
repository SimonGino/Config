proxies:
  - name: "ç›´è¿"
    type: direct
    udp: true

mixed-port: 7890
ipv6: true
allow-lan: true
unified-delay: false
tcp-concurrent: true
external-controller: 127.0.0.1:9090
external-ui: ui
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

tun:
  enable: true
  stack: mixed
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

dns:
  enable: true
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "+.market.xiaomi.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://dnd.mytest.cc/dns-query
  proxy-server-nameserver:
    - https://dnd.mytest.cc/dns-query

proxy-groups:
  # åŸºç¡€åˆ†æµç»„
  - name: èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies: [é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹, æˆ‘çš„èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: ç”µæŠ¥ä¿¡æ¯
    type: select
    proxies: [èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: å›½å¤–åª’ä½“
    type: select
    proxies: [èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: å¾®è½¯æœåŠ¡
    type: select
    proxies:
      [DIRECT, èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: è‹¹æœæœåŠ¡
    type: select
    proxies:
      [DIRECT, èŠ‚ç‚¹é€‰æ‹©, é¦™æ¸¯èŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: äººå·¥æ™ºèƒ½
    type: select
    proxies: [ç¾å›½èŠ‚ç‚¹, æ–°åŠ å¡èŠ‚ç‚¹]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  # åŒºåŸŸåˆ†æµç»„
  - name: é¦™æ¸¯èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    filter: "(?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b)"
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: ç¾å›½èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    filter: "(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US)"
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: æ—¥æœ¬èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    filter: "(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP)"
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: å°æ¹¾èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    filter: "(ğŸ¸)|(å°)|(Tai)|(TW)"
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: æ–°åŠ å¡èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    filter: "(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG)"
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: æˆ‘çš„èŠ‚ç‚¹
    type: select
    include-all: true
    exclude-type: direct
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

  - name: è‡ªå»ºå‰ç½®
    type: select
    proxies: [é¦™æ¸¯trojan, æ–°åŠ å¡trojan]
    url: "http://latency-test.skk.moe/endpoint"
    interval: 300

rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  domain: &domain { type: http, interval: 86400, behavior: domain, format: mrs }

rule-providers:
  # === Domainset è§„åˆ™ ===
  reject_domainset:
    type: http
    behavior: domain
    url: https://ruleset.skk.moe/Clash/domainset/reject.txt
    path: ./ruleset/reject_domainset.txt
    interval: 86400

  speedtest_domainset:
    type: http
    behavior: domain
    url: https://ruleset.skk.moe/Clash/domainset/speedtest.txt
    path: ./ruleset/speedtest_domainset.txt
    interval: 86400

  cdn_domainset:
    type: http
    behavior: domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./ruleset/cdn_domainset.txt
    interval: 86400

  apple_cdn_domainset:
    type: http
    behavior: domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./ruleset/apple_cdn_domainset.txt
    interval: 86400

  download_domainset:
    type: http
    behavior: domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./ruleset/download_domainset.txt
    interval: 86400

  # === Non_IP è§„åˆ™ ===
  reject_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/reject.txt
    path: ./ruleset/reject_non_ip.txt
    interval: 86400

  cdn_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./ruleset/cdn_non_ip.txt
    interval: 86400

  stream_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream.txt
    path: ./ruleset/stream_non_ip.txt
    interval: 86400

  telegram_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./ruleset/telegram_non_ip.txt
    interval: 86400

  microsoft_cdn_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./ruleset/microsoft_cdn_non_ip.txt
    interval: 86400

  download_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./ruleset/download_non_ip.txt
    interval: 86400

  apple_services_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./ruleset/apple_services_non_ip.txt
    interval: 86400

  microsoft_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./ruleset/microsoft_non_ip.txt
    interval: 86400

  ai_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./ruleset/ai_non_ip.txt
    interval: 86400

  global_non_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./ruleset/global_non_ip.txt
    interval: 86400

  # === IP è§„åˆ™ ===
  reject_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/ip/reject.txt
    path: ./ruleset/reject_ip.txt
    interval: 86400

  telegram_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./ruleset/telegram_ip.txt
    interval: 86400

  stream_ip:
    type: http
    behavior: classical
    url: https://ruleset.skk.moe/Clash/ip/stream.txt
    path: ./ruleset/stream_ip.txt
    interval: 86400

  china_ip:
    type: http
    behavior: ipcidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./ruleset/china_ip.txt
    interval: 86400

rules:
  # === è‡ªå®šä¹‰åŸŸåè§„åˆ™ ===
  - DOMAIN-SUFFIX,odylife.org,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,yxvm.com,DIRECT
  - DOMAIN-SUFFIX,eaimty.com,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,zed.dev,ç¾å›½èŠ‚ç‚¹
  - DOMAIN-SUFFIX,macked.app,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,odysseyplus.site,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,nodeseek.com,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,csb.app,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,codesandbox.io,èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,linux.do,èŠ‚ç‚¹é€‰æ‹©

  # === Domainset è§„åˆ™ ===
  - RULE-SET,reject_domainset,REJECT
  - RULE-SET,speedtest_domainset,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cdn_domainset,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,apple_cdn_domainset,è‹¹æœæœåŠ¡
  - RULE-SET,download_domainset,èŠ‚ç‚¹é€‰æ‹©

  # === Non_IP è§„åˆ™ ===
  - RULE-SET,reject_non_ip,REJECT
  - RULE-SET,cdn_non_ip,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,stream_non_ip,å›½å¤–åª’ä½“
  - RULE-SET,telegram_non_ip,ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,microsoft_cdn_non_ip,å¾®è½¯æœåŠ¡
  - RULE-SET,download_non_ip,èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,apple_services_non_ip,è‹¹æœæœåŠ¡
  - RULE-SET,microsoft_non_ip,å¾®è½¯æœåŠ¡
  - RULE-SET,ai_non_ip,äººå·¥æ™ºèƒ½
  - RULE-SET,global_non_ip,èŠ‚ç‚¹é€‰æ‹©

  # === IP è§„åˆ™ ===
  - RULE-SET,reject_ip,REJECT
  - RULE-SET,telegram_ip,ç”µæŠ¥ä¿¡æ¯
  - RULE-SET,stream_ip,å›½å¤–åª’ä½“
  - RULE-SET,china_ip,DIRECT

  # === Final ===
  - MATCH,èŠ‚ç‚¹é€‰æ‹©
