#!name=NAS-Exchange使用示例
#!desc=展示如何在Surge配置中使用NAS-Exchange模块

# =====================================
# NAS-Exchange 模块使用示例配置
# =====================================

[General]
# 基础配置
loglevel = notify
bypass-system = true
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local
bypass-tun = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12

# =====================================
# 策略组配置示例
# =====================================

[Proxy Group]
# NAS专用策略组
🖲️ NAS = select, 🌐 全球直连, home, 🇭🇰 香港节点, 🇯🇵 日本节点, 🇺🇸 美国节点, 🇸🇬 新加坡节点

# 家庭服务器策略组
家庭NAS = select, DIRECT, 家庭服务器, 🇭🇰 香港节点, 🇯🇵 日本节点

# 办公服务器策略组
办公NAS = select, 内网直连, 办公服务器, 🇸🇬 新加坡节点, 🇺🇸 美国节点

# 地区节点组
🇭🇰 香港节点 = select, HK-01, HK-02, HK-03
🇯🇵 日本节点 = select, JP-01, JP-02, JP-03
🇺🇸 美国节点 = select, US-01, US-02, US-03
🇸🇬 新加坡节点 = select, SG-01, SG-02, SG-03

# =====================================
# 模块配置示例
# =====================================

[Module]
# 基础配置 - 使用默认参数
NAS-Exchange-Basic = NAS-Exchange.sgmodule, tag=基础NAS切换, enabled=true, TARGET_WIFI=Xiaomi_8222_5G, PROXY_GROUP=🖲️ NAS

# 完整配置 - 自定义所有参数
NAS-Exchange-Full = NAS-Exchange.sgmodule, tag=完整NAS切换, enabled=true, TARGET_WIFI=Xiaomi_8222_5G, PROXY_GROUP=🖲️ NAS, DIRECT_NODE=🌐 全球直连, HOME_NODE=home, FALLBACK_NODE=🇭🇰 香港节点

# 家庭环境配置
NAS-Exchange-Home = NAS-Exchange.sgmodule, tag=家庭NAS, enabled=true, TARGET_WIFI=Home-WiFi-5G, PROXY_GROUP=家庭NAS, DIRECT_NODE=DIRECT, HOME_NODE=家庭服务器, FALLBACK_NODE=🇭🇰 香港节点

# 办公环境配置
NAS-Exchange-Office = NAS-Exchange.sgmodule, tag=办公NAS, enabled=true, TARGET_WIFI=Office-WiFi, PROXY_GROUP=办公NAS, DIRECT_NODE=内网直连, HOME_NODE=办公服务器, FALLBACK_NODE=🇸🇬 新加坡节点

# 简化配置 - 只检测WiFi切换
NAS-Exchange-Simple = NAS-Exchange-Simple.sgmodule, tag=简单NAS切换, enabled=true, TARGET_WIFI=MyHome-5G, PROXY_GROUP=🖲️ NAS, DIRECT_NODE=🌐 全球直连

# 多环境配置示例
NAS-Exchange-Home-Main = NAS-Exchange.sgmodule, tag=主卧NAS, enabled=true, TARGET_WIFI=Home-Main-5G, PROXY_GROUP=🖲️ NAS, DIRECT_NODE=🌐 全球直连, HOME_NODE=home, FALLBACK_NODE=🇭🇰 香港节点
NAS-Exchange-Home-Guest = NAS-Exchange.sgmodule, tag=客房NAS, enabled=true, TARGET_WIFI=Home-Guest-5G, PROXY_GROUP=🖲️ NAS, DIRECT_NODE=🌐 全球直连, HOME_NODE=home, FALLBACK_NODE=🇭🇰 香港节点

# =====================================
# 节点配置示例
# =====================================

[Proxy]
# 家庭服务器节点
家庭服务器 = ss, 192.168.1.100, 8388, encrypt-method=aes-256-gcm, password=your_password
home = ss, home.example.com, 443, encrypt-method=aes-256-gcm, password=your_password

# 办公服务器节点
办公服务器 = ss, 10.0.0.100, 8388, encrypt-method=aes-256-gcm, password=your_password

# 香港节点
HK-01 = ss, hk1.example.com, 443, encrypt-method=aes-256-gcm, password=password
HK-02 = ss, hk2.example.com, 443, encrypt-method=aes-256-gcm, password=password
HK-03 = ss, hk3.example.com, 443, encrypt-method=aes-256-gcm, password=password

# 日本节点
JP-01 = ss, jp1.example.com, 443, encrypt-method=aes-256-gcm, password=password
JP-02 = ss, jp2.example.com, 443, encrypt-method=aes-256-gcm, password=password
JP-03 = ss, jp3.example.com, 443, encrypt-method=aes-256-gcm, password=password

# 美国节点
US-01 = ss, us1.example.com, 443, encrypt-method=aes-256-gcm, password=password
US-02 = ss, us2.example.com, 443, encrypt-method=aes-256-gcm, password=password
US-03 = ss, us3.example.com, 443, encrypt-method=aes-256-gcm, password=password

# 新加坡节点
SG-01 = ss, sg1.example.com, 443, encrypt-method=aes-256-gcm, password=password
SG-02 = ss, sg2.example.com, 443, encrypt-method=aes-256-gcm, password=password
SG-03 = ss, sg3.example.com, 443, encrypt-method=aes-256-gcm, password=password

# =====================================
# 使用说明和配置指南
# =====================================

# 1. 参数说明：
#    TARGET_WIFI    - 目标WiFi SSID，检测到此WiFi时切换到直连模式
#    PROXY_GROUP    - 要控制的策略组名称，必须与上面定义的策略组名称一致
#    DIRECT_NODE    - 在目标WiFi下使用的节点，通常是直连或内网节点
#    HOME_NODE      - 检测到IPv6时使用的节点，适合有IPv6的环境
#    FALLBACK_NODE  - 默认节点，当既不在目标WiFi也没有IPv6时使用

# 2. 使用场景：
#    - 在家WiFi下：自动切换到直连模式，节省流量
#    - 有IPv6网络：使用home节点，速度更快
#    - 其他网络：使用fallback节点，保证连接稳定

# 3. 配置步骤：
#    a) 根据实际情况修改TARGET_WIFI为你的WiFi名称
#    b) 确保PROXY_GROUP对应的策略组已正确配置
#    c) 确保所有节点名称都存在于对应的策略组中
#    d) 保存配置并重启Surge

# 4. 常见WiFi名称示例：
#    - Xiaomi_8222_5G     (小米路由器5G)
#    - TP-LINK_5G         (TP-Link路由器5G)
#    - ASUS_5G            (华硕路由器5G)
#    - Home-WiFi-5G       (自定义家庭WiFi)
#    - Office-WiFi        (办公室WiFi)

# 5. 节点名称建议：
#    - 直连节点：DIRECT, 🌐 全球直连, 内网直连
#    - 家庭节点：home, 家庭服务器, 内网服务器
#    - 备用节点：🇭🇰 香港节点, 🇯🇵 日本节点, 🇺🇸 美国节点

# 6. 调试建议：
#    - 开启Surge的脚本日志功能
#    - 观察网络变化时的日志输出
#    - 检查策略组和节点配置是否正确
#    - 测试WiFi连接/断开时的自动切换

# 7. 注意事项：
#    - 确保WiFi名称大小写完全匹配
#    - 策略组名称必须与配置文件中定义的完全一致
#    - 所有节点名称必须存在于对应的策略组中
#    - 建议在测试环境中先验证配置正确性

# 8. 性能优化：
#    - 模块只在网络变化时触发，不会持续运行
#    - 使用Surge内置API检测IPv6，速度快且准确
#    - 智能判断，避免不必要的策略切换

# 9. 扩展用法：
#    - 可以配置多个模块实例，控制不同的策略组
#    - 可以为不同的WiFi环境配置不同的切换规则
#    - 可以结合其他模块实现更复杂的自动化场景
